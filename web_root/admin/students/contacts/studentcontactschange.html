<!DOCTYPE html>
<html>
<!-- start right frame -->
<head>
    <title>Student Info Change</title>
    ~[wc:commonscripts]
    <link href="/images/css/screen.css" rel="stylesheet" media="screen">
    <link href="/images/css/print.css" rel="stylesheet" media="print">

    <script src="/admin/javascript/parentdemo.js"></script>
    <script type="text/template" id="psm-student-contact-id-template">
        ~[tlist_sql;
        SELECT
        id
        FROM
        PSM_studentcontact
        WHERE
        studentid=(
        SELECT
        id
        FROM
        PSM_student
        WHERE
        studentidentifier=~(student_number)) AND
        studentcontacttypeid=(
        SELECT
        id
        FROM
        PSM_studentcontacttype
        WHERE
        name='Self')]
        ~(studentContactId)
        [/tlist_sql]
    </script>
    <script type="text/template" id="psm-student-id-template">
        ~[tlist_sql;
        SELECT
        id
        FROM
        PSM_student
        WHERE
        studentidentifier=~(student_number)]
        ~(id)
        [/tlist_sql]
    </script>
    <script type="text/template" id="psm-student-contact-type-template">
        ~[tlist_sql;
        SELECT
        id
        FROM
        PSM_studentcontacttype
        WHERE
        name='Self']
        ~(id)
        [/tlist_sql]
    </script>

    <script type="text/template" id="student-info-template">
        ~[tlist_sql;
        SELECT
        id
        FROM
        u_student_info_staging
        WHERE
        studentsdcid=~(rn)]
        ~(id)
        [/tlist_sql]
    </script>
    <script>
        /*global approveFieldChange*/
        function mailingAddressChange() {
            "use strict";
            approveFieldChange('on-file-mailing-street', 'staging-mailing-street');
            approveFieldChange('on-file-mailing-city', 'staging-mailing-city');
            approveFieldChange('on-file-mailing-state', 'staging-mailing-state');
            approveFieldChange('on-file-mailing-zip', 'staging-mailing-zip');
        }

        function residenceAddressChange() {
            "use strict";
            approveFieldChange('on-file-residence-street', 'staging-residence-street');
            approveFieldChange('on-file-residence-city', 'staging-residence-city');
            approveFieldChange('on-file-residence-state', 'staging-residence-state');
            approveFieldChange('on-file-residence-zip', 'staging-residence-zip');
        }

        if (typeof psData === 'undefined') {
            psData = {};
        }
        psData.studentDcid = "~(rn)";
        psData.studentFrn = "~(studentfrn)";
        psData.studentInfoStagingId = $j('#student-info-template').html().trim();
        psData.psmStudentContactId = $j('#psm-student-contact-id-template').html().trim();
        psData.psmStudentId = $j('#psm-student-id-template').html().trim();
        psData.psmStudentContactTypeId = $j('#psm-student-contact-type-template').html().trim();
        psData.parent_verify = "~([students.U_Students_Extension]parent_verify)";

    </script>
    <script src="/scripts/student-info/js/student-info.js"></script>
</head>
<body data-validation="exclude">

<form action="/admin/changesrecorded.white.html" method="POST" id="student-info-form">
    ~[DirectTable.Select:PSM_studentcontact;studentsdcid;~(rn)]
    ~[wc:admin_header_frame_css]<!-- breadcrumb start --><a href="/admin/home.html" target="_top">~[text:psx.html.admin_students.modifydata.start_page]</a>
    &gt; <a href="home.html?selectstudent=nosearch" target="_top">~[text:psx.html.admin_students.modifydata.student_selection]</a>
    &gt;Student Info Change<!-- breadcrumb end -->~[wc:admin_navigation_frame_css]

    ~[wc:title_student_begin_css]Student Info Change~[wc:title_student_end_css]

    <!-- start of content and bounding box -->
    <div class="box-round">

        <table border="0" cellspacing="0" cellpadding="4">
            <tr>
                <td class="bold">If SSO is on then this person is who last submitted a change:
                    ~(parent_wholastchanged)
                </td>
            </tr>
            <tr>
                <td class="bold">If this box is checked, any guardian can see demographics data and request changes
                    (potential legal issues!):<input type="checkbox" name="[students]enabledemoupdate" value="1"/></td>
            </tr>
        </table>
        <table class="linkDescList" border="0" cellspacing="0" cellpadding="4">
            <tr>
                <td class="bold">&nbsp;</td>
                <td width="200">On file with the school.</td>
                <td>&nbsp;</td>
                <td>Parent/Guardian Submitted Changes</td>
            </tr>
            <tr>
                <td class="bold">First Name</td>
                <td>
                    <input type="text"
                           id="live-first-name"
                           value=""
                           size="30">
                </td>
                <td><input type="button" value="Approve" onClick="mailingAddressChange();"/></td>
                <td>
                    <input type="text"
                           name="CF-[STUDENTS:~(dcid).U_STUDENT_CONTACTS.U_STUDENT_INFO_STAGING:~(id)]first_name"
                           id="staging-first-name"
                           class="staging"
                           value=""
                           size="30">
                </td>
            </tr>



            <!-- end copy here -->
        </table>
    </div>
    <div class="button-row">
        <input type="hidden" name="Students.dcid" value="~(rn)">
        [/tlist_sql]
        <input type="hidden" name="ac" value="prim">

        <span id="uncheck-span">Uncheck when done verifying information. --></span>
        <input type="checkbox" id="parent-verify" name="[students.U_Students_Extension]parent_verify"/>

        ~[tlist_sql;select s.dcid, sta.id
        from u_student_info_staging sta
        join students s on s.dcid=sta.studentsdcid
        where sta.studentsdcid=~(rn)]
            <input style="display: none;" id="dc-input" type="checkbox" name="DC-Students:~(dcid).U_STUDENT_INFO.U_STUDENT_INFO_STAGING:~(id)">
        [/tlist_sql]
        ~[submitbutton]
    </div>
    </div>

    <!-- end of content of bounding box -->

    ~[wc:admin_footer_frame_css]

<script type="text/template" id="parent-verify-msg-template">
    <div style="text-align: center; font-weight: bold">
        This student has Parent Verify checked but has no student information updates waiting to be verified.
        Please uncheck the box below and click Submit to fix this issue.
    </div>
</script>
</form>
</body>
</html><!-- end right frame -->
